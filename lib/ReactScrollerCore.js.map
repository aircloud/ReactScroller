{"version":3,"sources":["../src/ReactScrollerCore.jsx"],"names":["MINSPEED","polyfillforAnimation","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","reqFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","reqFrame2","clearTimeout","CommonScroll","props","state","CommonScrollConfig","y1","heightForShowRefresh","needRefresh","stopResponse","refs","CommonScrollContainer","style","overflow","addEventListener","e","handleTouchStart","bind","handleTouchMove","handleTouchEnd","touchInit","target","document","querySelector","container","lastCurrentX","x1","touches","pageX","lastCurrentY","pageY","isTouchStart","translateY","timeStep","startTime","trace","ifout","frameId","beginMove","verticalSlide","preventDefault","currentY","currentX","maxScroll","parseInt","minScroll","offsetHeight","scrollHeight","abs","criticalValue","criticalY","direction","transform","constructTransformForY","currLocation","push","showRefreshTip","lowerBound","onLowerArrive","showLoadMore","changedTouches","refresh","curr","dt","interval","distance","speed","go","ease","easeSmooth","ceil","moveEnd","ifend","speed0","goBeginTime","frame","time","frameDistance","width","console","log","children","number","x0","friction"],"mappings":"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","file":"ReactScrollerCore.js","sourcesContent":["/**\n * Created by Xiaotao.Nie on 08/07/2017.\n * All right reserved\n * IF you have any question please email iconie@tencent.com\n */\n\n// 目前只支持纵向滚动,并没有对横向滚动的支持\nimport React, { Component } from 'react';\n\nconst MINSPEED = 0.02;\n\n(function polyfillforAnimation() {\n    let lastTime = 0;\n    const vendors = ['webkit', 'moz'];\n    for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x += 1) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||    // Webkit中此取消方法的名字变了\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function reqFrame(callback) {\n            const currTime = new Date().getTime();\n            const timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n            const id = window.setTimeout(() => {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function reqFrame2(id) {\n            clearTimeout(id);\n        };\n    }\n}());\n\nclass CommonScroll extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.CommonScrollConfig = {\n            y1: 0,\n            heightForShowRefresh: 35,\n            needRefresh: false,\n            stopResponse:false,\n        };\n    }\n\n    static constructTransformForY(number) {\n        return \"translateY(\" + number + \"px)\";\n\n    }\n    // 提供一个默认的减速函数\n    static easeSmooth(x0, dt, friction) {\n        return x0 - (dt * friction);\n    }\n\n    componentDidMount() {\n        this.refs.CommonScrollContainer.style.overflow = \"hidden\";\n\n        // 修改成addEventListener形式,参考链接:https://www.chromestatus.com/features/5093566007214080\n        this.refs.CommonScrollContainer.addEventListener(\"touchstart\", (e) => { this.handleTouchStart.bind(this)(e); });\n        this.refs.CommonScrollContainer.addEventListener(\"touchmove\", (e) => { this.handleTouchMove.bind(this)(e); });\n        this.refs.CommonScrollContainer.addEventListener(\"touchend\", (e) => { this.handleTouchEnd.bind(this)(e); });\n\n        this.touchInit();\n    }\n    touchInit() {\n        this.CommonScrollConfig.target = typeof this.props.target === \"string\" ? document.querySelector(this.props.target) : this.props.target;\n        this.CommonScrollConfig.container = typeof this.props.container === \"string\" ? document.querySelector(this.props.container) : this.props.container;\n    }\n    handleTouchStart(e) {\n        // 重置needRefresh\n        this.needRefresh = false;\n        this.CommonScrollConfig.stopResponse = false;\n\n        // 如果这里阻止默认事件可能会出现原正常效果没有办法响应\n        // e.preventDefault();\n        this.CommonScrollConfig.lastCurrentX = this.CommonScrollConfig.x1 = e.touches[0].pageX;\n        this.CommonScrollConfig.lastCurrentY = this.CommonScrollConfig.y1 = e.touches[0].pageY;\n        this.CommonScrollConfig.isTouchStart = true;\n\n        this.CommonScrollConfig.translateY = this.CommonScrollConfig.translateY ? this.CommonScrollConfig.translateY : 0;\n\n        this.CommonScrollConfig.timeStep = this.CommonScrollConfig.startTime = new Date().getTime();\n        this.CommonScrollConfig.trace = [e.touches[0].pageY];\n\n        this.CommonScrollConfig.ifout = false;\n\n        if (this.CommonScrollConfig.frameId) {\n            window.cancelAnimationFrame(this.CommonScrollConfig.frameId);\n        }\n\n        this.CommonScrollConfig.beginMove = false;\n        this.CommonScrollConfig.verticalSlide = true;\n    }\n    handleTouchMove(e) {\n        e.preventDefault();\n\n        if(this.CommonScrollConfig.stopResponse) return;\n\n        this.CommonScrollConfig.currentY = e.touches[0].pageY;\n        this.CommonScrollConfig.currentX = e.touches[0].pageX;\n\n        const maxScroll = parseInt(this.props.maxScroll, 10);\n        const minScroll = parseInt((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight), 10);\n\n        if (!this.CommonScrollConfig.beginMove) {\n            this.CommonScrollConfig.beginMove = true;\n            this.CommonScrollConfig.verticalSlide = (Math.abs(this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY) >= Math.abs(this.CommonScrollConfig.currentX - this.CommonScrollConfig.lastCurrentX));\n        }\n        // verticalSlide: 表明不是左右滚动\n        if (this.CommonScrollConfig.isTouchStart && this.CommonScrollConfig.verticalSlide) {\n            if (this.CommonScrollConfig.translateY >= maxScroll\n                || this.CommonScrollConfig.translateY <= minScroll\n            ) {\n                if (!this.CommonScrollConfig.ifout) {\n                    this.CommonScrollConfig.criticalValue = e.touches[0].pageY;\n                    this.CommonScrollConfig.criticalY = this.CommonScrollConfig.translateY;\n                } else {\n                    this.CommonScrollConfig.direction = this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY > 0 ? 1 : -1;\n\n                    // 这里自己目前还是不确定用什么缓动函数比较好\n                    this.CommonScrollConfig.translateY += 0.3 * (this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY);\n                    this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n                    // 这个时候对滑动距离取对数\n                    if ((new Date().getTime() - this.CommonScrollConfig.timeStep) > 100) {\n                        // 这个时候距离不再是标准的距离了\n                        // 理论上这里的pageY的计算方式应该发生一些变化\n                        const currLocation = e.touches[0].pageY;\n\n                        this.CommonScrollConfig.trace.push(currLocation);\n\n                        this.CommonScrollConfig.timeStep += 100;\n                    }\n\n                    // 增加下拉刷新的判断逻辑 注意判断是下拉,所以增加了一个判断\n                    if (this.CommonScrollConfig.translateY >= maxScroll && Math.abs(this.CommonScrollConfig.currentY - this.CommonScrollConfig.criticalValue) * 0.3 > this.CommonScrollConfig.heightForShowRefresh) {\n                        this.props.showRefreshTip();\n                        this.needRefresh = true;\n                    }\n                }\n\n                this.CommonScrollConfig.ifout = true;\n            } else {\n                this.CommonScrollConfig.ifout = false;\n\n                if ((new Date().getTime() - this.CommonScrollConfig.timeStep) > 100) {\n                    this.CommonScrollConfig.trace.push(e.touches[0].pageY);\n                    this.CommonScrollConfig.timeStep += 100;\n                }\n\n                this.CommonScrollConfig.translateY += (this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY);\n                this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n            }\n            this.CommonScrollConfig.lastCurrentY = this.CommonScrollConfig.currentY;\n        }\n\n        if (this.CommonScrollConfig.translateY < minScroll + this.props.lowerBound) {\n            this.props.onLowerArrive();\n            if(this.props.showLoadMore) {\n                this.CommonScrollConfig.stopResponse = true;\n            }\n        }\n    }\n    handleTouchEnd(e) {\n        // e.preventDefault();\n\n        this.CommonScrollConfig.currentY = e.changedTouches[0].pageY;\n\n        if (this.needRefresh) {\n            this.props.refresh();\n        }\n\n        if ((new Date().getTime() - this.CommonScrollConfig.timeStep) > 100) {\n            this.CommonScrollConfig.trace.push(e.changedTouches[0].pageY);\n            this.CommonScrollConfig.timeStep += 100;\n        }\n\n        if (this.CommonScrollConfig.isTouchStart && this.CommonScrollConfig.verticalSlide) {\n            const curr = new Date().getTime();\n            const dt = curr - this.CommonScrollConfig.startTime;\n            if (dt > 300) {\n                // 如果滑动的时间大于300ms 这个时候应该取后面的一部分的速度\n                // 这个时候该如何计算速度呢 我们需要用到之前的轨迹记录\n\n                const interval = (curr - this.CommonScrollConfig.timeStep) + 300;\n                const distance = this.CommonScrollConfig.currentY - this.CommonScrollConfig.trace[this.CommonScrollConfig.trace.length - 3];\n                let speed = distance / interval;\n\n                this.CommonScrollConfig.direction = speed > 0 ? 1 : -1;\n                speed = Math.abs(speed);\n                this.go(speed, this.props.ease || CommonScroll.easeSmooth, true);\n            } else {\n                const distance = this.CommonScrollConfig.currentY - this.CommonScrollConfig.y1;\n                let speed = distance / dt;\n\n                this.CommonScrollConfig.direction = speed > 0 ? 1 : -1;\n                speed = Math.abs(speed);\n                this.go(speed, this.props.ease || CommonScroll.easeSmooth, true);\n            }\n        }\n    }\n\n    moveEnd() {\n        // 这个函数的作用是如果超出边界了就返回\n        if (this.CommonScrollConfig.translateY >= this.props.maxScroll) {\n            // 超过最大值\n            this.CommonScrollConfig.translateY = this.CommonScrollConfig.translateY - Math.ceil((this.CommonScrollConfig.translateY - this.props.maxScroll) / 2);\n            this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n            if (this.CommonScrollConfig.translateY > this.props.maxScroll) {\n                window.requestAnimationFrame(this.moveEnd.bind(this));\n            } else {\n                this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.props.maxScroll);\n            }\n        } else {\n            // 小于最小值\n            this.CommonScrollConfig.translateY = this.CommonScrollConfig.translateY + Math.ceil(((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight) - this.CommonScrollConfig.translateY) / 2);\n            this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n            if (this.CommonScrollConfig.translateY < (this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight)) {\n                window.requestAnimationFrame(this.moveEnd.bind(this));\n            } else {\n                this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight));\n            }\n        }\n    }\n    go(speed, ease, ifend) {\n        const speed0 = speed;\n        const goBeginTime = new Date().getTime();\n        let lastTime = new Date().getTime();\n\n        const frame = function () {\n\n            // if(this.CommonScrollConfig.stopResponse) return;\n\n            const time = new Date().getTime() - lastTime;\n            const dt = (time + lastTime) - goBeginTime;\n            const frameDistance = Math.ceil(speed * time) * this.CommonScrollConfig.direction;\n            if (time === 0) {\n                window.requestAnimationFrame(frame.bind(this));\n                return;\n            }\n            this.CommonScrollConfig.translateY += frameDistance;\n            this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n            if (this.CommonScrollConfig.translateY >= this.props.maxScroll\n                || this.CommonScrollConfig.translateY <= (this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight)\n            ) {\n                speed = ease(speed0, dt, 0.2);\n            } else {\n                speed = ease(speed0, dt, 0.0006);\n            }\n            lastTime = new Date().getTime();\n            const minScroll = parseInt((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight), 10);\n\n            if (this.CommonScrollConfig.translateY < minScroll + this.props.lowerBound) {\n                this.props.onLowerArrive();\n                if(this.props.showLoadMore) {\n                    this.CommonScrollConfig.stopResponse = true;\n                }\n            }\n\n            if (speed >= MINSPEED) {\n                this.CommonScrollConfig.frameId = window.requestAnimationFrame(frame.bind(this));\n            } else if (ifend) {\n                this.CommonScrollConfig.isTouchStart = false;\n                if (this.CommonScrollConfig.translateY >= this.props.maxScroll\n                    || this.CommonScrollConfig.translateY <= (this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight)\n                ) {\n                    this.moveEnd();\n                }\n            }\n        };\n\n        this.CommonScrollConfig.frameId = window.requestAnimationFrame(frame.bind(this));\n    }\n    render() {\n        return (\n            <div ref=\"CommonScrollContainer\"\n                 id=\"CommonScrollContainer\"\n                 style={{width:this.props.width||\"100%\"}}\n                 onClick={()=>{console.log(\"CommonScrollContainer\");}}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default CommonScroll;\n"]}