{"version":3,"sources":["../src/ReactScrollerCore.jsx"],"names":["MINSPEED","polyfillforAnimation","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","reqFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","reqFrame2","clearTimeout","CommonScroll","props","state","CommonScrollConfig","y1","heightForShowRefresh","needRefresh","refs","CommonScrollContainer","style","overflow","addEventListener","e","handleTouchStart","bind","handleTouchMove","handleTouchEnd","touchInit","target","document","querySelector","container","lastCurrentX","x1","touches","pageX","lastCurrentY","pageY","isTouchStart","translateY","timeStep","startTime","trace","ifout","frameId","beginMove","verticalSlide","preventDefault","currentY","currentX","maxScroll","parseInt","minScroll","offsetHeight","scrollHeight","abs","criticalValue","criticalY","direction","transform","constructTransformForY","currLocation","push","showRefreshTip","lowerBound","onLowerArrive","changedTouches","refresh","curr","dt","interval","distance","speed","go","ease","easeSmooth","ceil","moveEnd","ifend","speed0","goBeginTime","frame","time","frameDistance","width","children","number","x0","friction"],"mappings":"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","file":"ReactScrollerCore.js","sourcesContent":["/**\n * Created by Xiaotao.Nie on 08/07/2017.\n * All right reserved\n * IF you have any question please email iconie@tencent.com\n */\n\n// 目前只支持纵向滚动,并没有对横向滚动的支持\nimport React, { Component } from 'react';\n\nconst MINSPEED = 0.02;\n\n(function polyfillforAnimation() {\n    let lastTime = 0;\n    const vendors = ['webkit', 'moz'];\n    for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x += 1) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||    // Webkit中此取消方法的名字变了\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function reqFrame(callback) {\n            const currTime = new Date().getTime();\n            const timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n            const id = window.setTimeout(() => {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function reqFrame2(id) {\n            clearTimeout(id);\n        };\n    }\n}());\n\nclass CommonScroll extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.CommonScrollConfig = {\n            y1: 0,\n            heightForShowRefresh: 35,\n            needRefresh: false,\n        };\n    }\n\n    static constructTransformForY(number) {\n        return \"translateY(\" + number + \"px)\";\n    }\n    // 提供一个默认的减速函数\n    static easeSmooth(x0, dt, friction) {\n        return x0 - (dt * friction);\n    }\n\n    componentDidMount() {\n        this.refs.CommonScrollContainer.style.overflow = \"hidden\";\n\n        // 修改成addEventListener形式,参考链接:https://www.chromestatus.com/features/5093566007214080\n        this.refs.CommonScrollContainer.addEventListener(\"touchstart\", (e) => { this.handleTouchStart.bind(this)(e); });\n        this.refs.CommonScrollContainer.addEventListener(\"touchmove\", (e) => { this.handleTouchMove.bind(this)(e); });\n        this.refs.CommonScrollContainer.addEventListener(\"touchend\", (e) => { this.handleTouchEnd.bind(this)(e); });\n\n        this.touchInit();\n    }\n    touchInit() {\n        this.CommonScrollConfig.target = typeof this.props.target === \"string\" ? document.querySelector(this.props.target) : this.props.target;\n        this.CommonScrollConfig.container = typeof this.props.container === \"string\" ? document.querySelector(this.props.container) : this.props.container;\n    }\n    handleTouchStart(e) {\n        // 重置needRefresh\n        this.needRefresh = false;\n\n        // 如果这里阻止默认事件可能会出现原正常效果没有办法响应\n        // e.preventDefault();\n        this.CommonScrollConfig.lastCurrentX = this.CommonScrollConfig.x1 = e.touches[0].pageX;\n        this.CommonScrollConfig.lastCurrentY = this.CommonScrollConfig.y1 = e.touches[0].pageY;\n        this.CommonScrollConfig.isTouchStart = true;\n\n        this.CommonScrollConfig.translateY = this.CommonScrollConfig.translateY ? this.CommonScrollConfig.translateY : 0;\n\n        this.CommonScrollConfig.timeStep = this.CommonScrollConfig.startTime = new Date().getTime();\n        this.CommonScrollConfig.trace = [e.touches[0].pageY];\n\n        this.CommonScrollConfig.ifout = false;\n\n        if (this.CommonScrollConfig.frameId) {\n            window.cancelAnimationFrame(this.CommonScrollConfig.frameId);\n        }\n\n        this.CommonScrollConfig.beginMove = false;\n        this.CommonScrollConfig.verticalSlide = true;\n    }\n    handleTouchMove(e) {\n        e.preventDefault();\n\n        this.CommonScrollConfig.currentY = e.touches[0].pageY;\n        this.CommonScrollConfig.currentX = e.touches[0].pageX;\n\n        const maxScroll = parseInt(this.props.maxScroll, 10);\n        const minScroll = parseInt((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight), 10);\n\n        if (!this.CommonScrollConfig.beginMove) {\n            this.CommonScrollConfig.beginMove = true;\n            this.CommonScrollConfig.verticalSlide = (Math.abs(this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY) >= Math.abs(this.CommonScrollConfig.currentX - this.CommonScrollConfig.lastCurrentX));\n        }\n        // verticalSlide: 表明不是左右滚动\n        if (this.CommonScrollConfig.isTouchStart && this.CommonScrollConfig.verticalSlide) {\n            if (this.CommonScrollConfig.translateY >= maxScroll\n                || this.CommonScrollConfig.translateY <= minScroll\n            ) {\n                if (!this.CommonScrollConfig.ifout) {\n                    this.CommonScrollConfig.criticalValue = e.touches[0].pageY;\n                    this.CommonScrollConfig.criticalY = this.CommonScrollConfig.translateY;\n                } else {\n                    this.CommonScrollConfig.direction = this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY > 0 ? 1 : -1;\n\n                    // 这里自己目前还是不确定用什么缓动函数比较好\n                    this.CommonScrollConfig.translateY += 0.3 * (this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY);\n                    this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n                    // 这个时候对滑动距离取对数\n                    if ((new Date().getTime() - this.CommonScrollConfig.timeStep) > 100) {\n                        // 这个时候距离不再是标准的距离了\n                        // 理论上这里的pageY的计算方式应该发生一些变化\n                        const currLocation = e.touches[0].pageY;\n\n                        this.CommonScrollConfig.trace.push(currLocation);\n\n                        this.CommonScrollConfig.timeStep += 100;\n                    }\n\n                    // 增加下拉刷新的判断逻辑 注意判断是下拉,所以增加了一个判断\n                    if (this.CommonScrollConfig.translateY >= maxScroll && Math.abs(this.CommonScrollConfig.currentY - this.CommonScrollConfig.criticalValue) * 0.3 > this.CommonScrollConfig.heightForShowRefresh) {\n                        this.props.showRefreshTip();\n                        this.needRefresh = true;\n                    }\n                }\n\n                this.CommonScrollConfig.ifout = true;\n            } else {\n                this.CommonScrollConfig.ifout = false;\n\n                if ((new Date().getTime() - this.CommonScrollConfig.timeStep) > 100) {\n                    this.CommonScrollConfig.trace.push(e.touches[0].pageY);\n                    this.CommonScrollConfig.timeStep += 100;\n                }\n\n                this.CommonScrollConfig.translateY += (this.CommonScrollConfig.currentY - this.CommonScrollConfig.lastCurrentY);\n                this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n            }\n\n            this.CommonScrollConfig.lastCurrentY = this.CommonScrollConfig.currentY;\n        }\n\n        if (this.CommonScrollConfig.translateY < minScroll + this.props.lowerBound) {\n            this.props.onLowerArrive();\n        }\n    }\n    handleTouchEnd(e) {\n        this.CommonScrollConfig.currentY = e.changedTouches[0].pageY;\n\n        if (this.needRefresh) {\n            this.props.refresh();\n        }\n\n        if ((new Date().getTime() - this.CommonScrollConfig.timeStep) > 100) {\n            this.CommonScrollConfig.trace.push(e.changedTouches[0].pageY);\n            this.CommonScrollConfig.timeStep += 100;\n        }\n\n        if (this.CommonScrollConfig.isTouchStart && this.CommonScrollConfig.verticalSlide) {\n            const curr = new Date().getTime();\n            const dt = curr - this.CommonScrollConfig.startTime;\n            if (dt > 300) {\n                // 如果滑动的时间大于300ms 这个时候应该取后面的一部分的速度\n                // 这个时候该如何计算速度呢 我们需要用到之前的轨迹记录\n\n                const interval = (curr - this.CommonScrollConfig.timeStep) + 300;\n                const distance = this.CommonScrollConfig.currentY - this.CommonScrollConfig.trace[this.CommonScrollConfig.trace.length - 3];\n                let speed = distance / interval;\n\n                this.CommonScrollConfig.direction = speed > 0 ? 1 : -1;\n                speed = Math.abs(speed);\n                this.go(speed, this.props.ease || CommonScroll.easeSmooth, true);\n            } else {\n                const distance = this.CommonScrollConfig.currentY - this.CommonScrollConfig.y1;\n                let speed = distance / dt;\n\n                this.CommonScrollConfig.direction = speed > 0 ? 1 : -1;\n                speed = Math.abs(speed);\n                this.go(speed, this.props.ease || CommonScroll.easeSmooth, true);\n            }\n        }\n    }\n\n    moveEnd() {\n        // 这个函数的作用是如果超出边界了就返回\n        if (this.CommonScrollConfig.translateY >= this.props.maxScroll) {\n            // 超过最大值\n            this.CommonScrollConfig.translateY = this.CommonScrollConfig.translateY - Math.ceil((this.CommonScrollConfig.translateY - this.props.maxScroll) / 2);\n            this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n            if (this.CommonScrollConfig.translateY > this.props.maxScroll) {\n                window.requestAnimationFrame(this.moveEnd.bind(this));\n            } else {\n                this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.props.maxScroll);\n            }\n        } else {\n            // 小于最小值\n            this.CommonScrollConfig.translateY = this.CommonScrollConfig.translateY + Math.ceil(((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight) - this.CommonScrollConfig.translateY) / 2);\n            this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n            if (this.CommonScrollConfig.translateY < (this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight)) {\n                window.requestAnimationFrame(this.moveEnd.bind(this));\n            } else {\n                this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight));\n            }\n        }\n    }\n    go(speed, ease, ifend) {\n        const speed0 = speed;\n        const goBeginTime = new Date().getTime();\n        let lastTime = new Date().getTime();\n\n        const frame = function () {\n            const time = new Date().getTime() - lastTime;\n            const dt = (time + lastTime) - goBeginTime;\n            const frameDistance = Math.ceil(speed * time) * this.CommonScrollConfig.direction;\n            if (time === 0) {\n                window.requestAnimationFrame(frame.bind(this));\n                return;\n            }\n            this.CommonScrollConfig.translateY += frameDistance;\n            this.CommonScrollConfig.target.style.transform = CommonScroll.constructTransformForY(this.CommonScrollConfig.translateY);\n\n            if (this.CommonScrollConfig.translateY >= this.props.maxScroll\n                || this.CommonScrollConfig.translateY <= (this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight)\n            ) {\n                speed = ease(speed0, dt, 0.2);\n            } else {\n                speed = ease(speed0, dt, 0.0005);\n            }\n\n            lastTime = new Date().getTime();\n            const minScroll = parseInt((this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight), 10);\n\n            if (this.CommonScrollConfig.translateY < minScroll + this.props.lowerBound) {\n                this.props.onLowerArrive();\n            }\n\n            if (speed >= MINSPEED) {\n                this.CommonScrollConfig.frameId = window.requestAnimationFrame(frame.bind(this));\n            } else if (ifend) {\n                this.CommonScrollConfig.isTouchStart = false;\n                if (this.CommonScrollConfig.translateY >= this.props.maxScroll\n                    || this.CommonScrollConfig.translateY <= (this.CommonScrollConfig.container.offsetHeight - this.CommonScrollConfig.target.scrollHeight)\n                ) {\n                    this.moveEnd();\n                }\n            }\n        };\n\n        this.CommonScrollConfig.frameId = window.requestAnimationFrame(frame.bind(this));\n    }\n    render() {\n        return (\n            <div ref=\"CommonScrollContainer\"\n                 id=\"CommonScrollContainer\"\n                 style={{width:this.props.width||\"100%\"}}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default CommonScroll;\n"]}